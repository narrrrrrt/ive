<!DOCTYPE html>
<html>
  <head><title>Reversi Lobby</title></head>
  <body>
    <h1>Lobby</h1>

    <!-- ルームリンク -->
    <div>
      <h2>Room 1</h2>
      <a href="room.html?id=1&seat=black">Black</a> |
      <a href="room.html?id=1&seat=white">White</a> |
      <a href="room.html?id=1&seat=observer">Observer</a>
    </div>
    <div>
      <h2>Room 2</h2>
      <a href="room.html?id=2&seat=black">Black</a> |
      <a href="room.html?id=2&seat=white">White</a> |
      <a href="room.html?id=2&seat=observer">Observer</a>
    </div>
    <div>
      <h2>Room 3</h2>
      <a href="room.html?id=3&seat=black">Black</a> |
      <a href="room.html?id=3&seat=white">White</a> |
      <a href="room.html?id=3&seat=observer">Observer</a>
    </div>
    <div>
      <h2>Room 4</h2>
      <a href="room.html?id=4&seat=black">Black</a> |
      <a href="room.html?id=4&seat=white">White</a> |
      <a href="room.html?id=4&seat=observer">Observer</a>
    </div>

    <hr>

    <!-- デバッグ用ブロードキャスト表示 -->
    <h2>Broadcast Debug</h2>
    <pre id="debug"></pre>

    <script>
      // ロビーでも「Room 0」としてWS接続
      const ws = new WebSocket(`wss://${location.host}/lobby/ws`)

      ws.onmessage = (msg) => {
        const { event, data } = JSON.parse(msg.data)
        const debug = document.getElementById("debug")
        debug.textContent += `[${event}] ${JSON.stringify(data)}\n`
      }
    </script>
  </body>
</html>